from django.core.validators import ValidationError

from .base_validator import BaseValidator
from ib_users.constants.user_profile.enums import Language
from ib_users.constants.custom_exception_messages import \
    INVALID_LANGUAGE


class LanguageValidator(BaseValidator):

    @classmethod
    def validate(cls, value):
        try:
            cls._validate_language(value)
        except ValidationError as e:
            from ib_users.exceptions.invalid_language_exception import \
                InvalidLanguageException

            raise InvalidLanguageException(
                message=INVALID_LANGUAGE.message, exception_type=INVALID_LANGUAGE.code)

    @classmethod
    def _validate_language(cls, gender):
        if gender not in Language.get_list_of_values():
            raise ValidationError(INVALID_LANGUAGE.message)

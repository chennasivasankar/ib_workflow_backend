from django.core.validators import ValidationError

from .base_validator import BaseValidator
from ib_users.constants.user_profile.enums import Gender
from ib_users.constants.custom_exception_messages import \
    INVALID_GENDER


class GenderValidator(BaseValidator):

    @classmethod
    def validate(cls, value):
        try:
            cls._validate_gender(value)
        except ValidationError as e:
            from ib_users.exceptions.invalid_gender_exception import \
                InvalidGenderException

            raise InvalidGenderException(
                message=INVALID_GENDER.message, exception_type=INVALID_GENDER.code)

    @classmethod
    def _validate_gender(cls, gender):
        if gender not in Gender.get_list_of_values():
            raise ValidationError(INVALID_GENDER.message)

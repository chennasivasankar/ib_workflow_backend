from ib_users.interactors.third_party.facebook_provider import FacebookLibrary, \
    FacebookProfileDTO


class FacebookProvider(FacebookLibrary):
    def get_facebook_profile(self, access_token: str) -> FacebookProfileDTO:
        from open_facebook import OpenFacebook
        graph = OpenFacebook(
            access_token=access_token, version='v2.8'
        )
        user = graph.get(
            'me', fields='id,name,email,gender,birthday,link'
        )

        return FacebookProfileDTO(
            id=user['id'],
            name=user['name'],
            birthday=user['birthday'],
            gender=user['gender'],
            link=user['link']
        )

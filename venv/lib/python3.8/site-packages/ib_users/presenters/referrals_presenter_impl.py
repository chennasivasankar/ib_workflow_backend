from typing import List

from ib_users.interactors.presenters.referrals_presenter import \
    ReferralsPresenter
from ib_users.interactors.storages.referrals_storage import ReferralDTO, \
    ReferralDetailsDTO


class ReferralsPresenterJSON(ReferralsPresenter):

    def get_user_id_and_referral_limit(self, referralDTO: ReferralDTO):
        return {
            "user_id": referralDTO.user_id,
            "referral_limit": referralDTO.referral_limit
        }

    def get_referral_details(self,
                             referral_code_dtos: List[ReferralDetailsDTO]):
        response = [self._get_referral_details_json(referral_details_dto) for
                    referral_details_dto in referral_code_dtos]
        return response

    def _get_referral_details_json(self,
                                   referral_details_dto: ReferralDetailsDTO):
        return {
            "referral_code": referral_details_dto.referral_code,
            "referral_limit": referral_details_dto.referral_limit
        }

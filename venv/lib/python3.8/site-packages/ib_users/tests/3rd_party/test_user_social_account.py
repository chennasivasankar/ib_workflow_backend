from ib_users.third_party.social_account.facebook_account import \
    FacebookAccount
from ib_users.third_party.social_account.google_account import GoogleAccount
from ib_users.third_party.social_account.twitter_account import TwitterAccount
import pytest
from ib_users.exceptions.custom_exception_constants import ExceptionMessages
from ib_users.exceptions.user_account_exceptions import InvalidAction


@pytest.mark.parametrize(
    'social_account', [
        (FacebookAccount()), (TwitterAccount()), (GoogleAccount())
    ])
def test_throw_exception_when_link_social_account_with_empty_access_token(
        social_account):
    access_token = ""
    with pytest.raises(InvalidAction) as e:
        social_account.check_and_throw_exception_if_given_string_is_empty(
            string=access_token
        )

    assert ExceptionMessages.SOCIAL_ACCESS_TOKEN_IS_EMPTY.format(
        social_account.get_social_account_type()
    ) in str(e.value)
